<!DOCTYPE html>
<html>
<head>
  <title>Exercise 1: Pseudo-Random Number Generator patterns</title>
  <link rel="stylesheet" href="css/layout.css">
  <script src="js/jquery-3.0.0.min.js"></script>
  <script src="js/layout.js"></script>
  <script src="js/numbers-frame.js"></script>
</head>
<body>
  <div class="container">
    <h2 style="margin-bottom: 0;">Exercise 1</h2>
    <h1 style="margin-top: 5px;">Pseudo-Random Number Generator patterns</h1>
    <p><b>To learn more about Pseudo-random Number Generation, we're going to take a look at a relatively simple algorithm for it.</b></p>
    <hr>

    <h2>Which of these look random to you?</h2>
    <p>The relationship between each number in the sequence and how large they are.</p>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=65473-m=65536-c=0-intensity.png);">A</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">There's a lot of structure in this.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=259-m=65534-c=0-intensity.png);">B</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Definite patterns: this looks like a repeating barcode.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=9562-m=65522-c=0-intensity.png);">C</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Pretty structure, but structure nonetheless.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=1001-m=2187-c=8-intensity.png);">D</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Looks like a little tiled image.</p>
      </li>
    </ul>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=361-m=450-c=1-intensity.png);">E</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">The bands are some sort of structure.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=71-m=125-c=1-intensity.png);">F</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Definite structure.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=85-m=65536-c=1-intensity.png);">G</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This does look quite random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=29305-m=58564-c=1-intensity.png);">H</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This does look quite random.</p>
      </li>
    </ul>
    <hr>

    <h2>How about now?</h2>
    <p>The 5 least significant bits of each generator's output.</p>
    <ul class="numbers-frame-collection">
      <li class="numbers-frame" data-numbers-path="numbers/a=65473-m=65536-c=0-binary.txt">
        <span class="label">A</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The 5 lowest bits are always identical. The variation is entirely in the high bits.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=259-m=65534-c=0-binary.txt">
        <span class="label">B</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least bit is always 1.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=9562-m=65522-c=0-binary.txt">
        <span class="label">C</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least bit is always 0.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=1001-m=2187-c=8-binary.txt">
        <span class="label">D</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The pattern here isn't obvious displayed like this.</p>
      </li>
    </ul>
    <ul class="numbers-frame-collection">
      <li class="numbers-frame" data-numbers-path="numbers/a=361-m=450-c=1-binary.txt">
        <span class="label">E</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least bit alternates between 0 and 1.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=71-m=125-c=1-binary.txt">
        <span class="label">F</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The pattern here isn't obvious displayed like this.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=85-m=65536-c=1-binary.txt">
        <span class="label">G</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least, 2nd least and 3rd least bits each repeat very quickly.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=29305-m=58564-c=1-binary.txt">
        <span class="label">H</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least and 2nd least bits each repeat very quickly.</p>
      </li>
    </ul>
    <hr>

    <h2>And now?</h2>
    <p>The relationship between a number and the successive number.</p>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=65473-m=65536-c=0-pairs.png);">A</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">It's not immediately obvious that it repeats, but this doesn't look random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=259-m=65534-c=0-pairs.png);">B</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This really doesn't look random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=9562-m=65522-c=0-pairs.png);">C</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This is more scattered than A, B or C but still doesn't look random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=1001-m=2187-c=8-pairs.png);">D</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This really doesn't look random.</p>
      </li>
    </ul>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=361-m=450-c=1-pairs.png);">E</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Those straight lines don't look stereotypically random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=71-m=125-c=1-pairs.png);">F</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">There's nothing here. Not random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=85-m=65536-c=1-pairs.png);">G</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This is very uniform but it isn't random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=29305-m=58564-c=1-pairs.png);">H</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This is quite complex but there are evident patterns.</p>
      </li>
    </ul>
    <hr>

    <h2>Linear Congruential Generators</h2>
    <p>The algorithm behind all these sequences is called the Linear Congruential Generator. It works by a simple recurrence relationship:</p>
    <p>
<pre style="font-size: 24px;">X<sub>n+1</sub> = aX<sub>n</sub> + c (mod m)</pre>
    </p>
    <p>So starting with a provided <b>seed <code>X<sub>0</sub></code></b> this generates a sequence,</p>
    <p>
<pre style="font-size: 20px;">X<sub>0</sub>, X<sub>1</sub>, X<sub>2</sub>, X<sub>3</sub>, &hellip;</pre>
    </p>
    <p>where</p>
    <p>
<pre style="font-size: 20px;">X<sub>1</sub> = aX<sub>0</sub> + c (mod m)
X<sub>2</sub> = aX<sub>1</sub> + c (mod m)
X<sub>3</sub> = aX<sub>2</sub> + c (mod m)
&vellip;</pre>
    </p>
    <p>Each generator <code>A, &hellip;, H</code> has its own parameters <code>a</code>, <code>m</code> and <code>c</code>. You'll be provided with these to answer the questions that follow.</p>

    <p>Let's consider generator A. This has parameters <code>a = 65473, m = 65536, c = 0</code>.</p>

<pre style="font-size: 16px;"><b>X<sub>n+1</sub> = 65473X<sub>n</sub> + 0 (mod 65536)</b></pre>

    <p>We set <code>X<sub>0</sub> = 1</code>. Now let's calculate things.</p>

<pre style="font-size: 16px;">X<sub>1</sub> = 65473&times;1     + 0 (mod 65536) =      65473 (mod 65536) = 65473 = 0b1111111111000001
X<sub>2</sub> = 65473&times;65473 + 0 (mod 65536) = 4286713729 (mod 65536) =  3969 = 0b0000111110000001
X<sub>3</sub> = 65473&times;3969  + 0 (mod 65536) =  259862337 (mod 65536) = 12097 = 0b0010111101000001
X<sub>4</sub> = 65473&times;12097 + 0 (mod 65536) =  792026881 (mod 65536) = 24321 = 0b0101111100000001</pre>
    <hr>

    <h2>Why do some of these sequences look more random than others?</h2>
    <p>A good pseudorandom sequence cannot be distinguished from a truly random sequence. As you've seen above, there are many different ways to analyse the statistical properties of a sequence. We've deliberately focused on ones that can be visualised. You're about to implement two more that are quite relevant to LCGs.</p>
    <h3>Task 1: Cycle lengths</h3>
    <p>You may have noticed on D's intensity chart (the top one) that there's a small pattern repeated many times. B also seems to repeat, but a little less regularly. In fact, all these generators produce sequences that will repeat eventually. A given output value will eventually be produced again, at which point the value after will also repeat. Thus the entire sequence cycles.</p>
    <p>Your task is to write a Python function to count the cycle length of each generator. Count how long it is until the first output value appears again.</p>
    <p><b>@TODO: direct people to <code>exercise1/cycle_lengths.py</code>.</b></p>
    <p>Compare your cycle lengths with the top diagrams. Do you see how the ones with small visible patterns tend to have short cycle lengths?</p>

    <h3>Task 2: Low bit cycle lengths</h3>
    <p>As you saw from the binary outputs, many of these generators have clear patterns in the lower bits. These patterns have cycles <i>far</i> shorter than the overall cycle length. To use generator A as an example again:</p>
    <pre style="font-size: 16px;">X<sub>n+1</sub> = 65473X<sub>n</sub> + 0 (mod 65536)</pre>
    <p>We're seeding with an odd value, 1. Thus <b><code>X<sub>1</sub> = odd&times;odd (mod even)</code></b>. Consider that multiplying odd numbers together gives an odd number, and that an odd number minus an even number is odd. You should see why all the values in the sequence will be odd and therefore have a least significant bit of 1.</p>
    <p>The objective in this task is to calculate the cycle length of just the lower few bits of each output. This is trickier than the cycle length of the entire output: you know the low-bit cycle length must be less-than-or-equal-to the overall cycle length, but until you've observed the cycle repeating up to the overall cycle length you can't be sure you have found a cycle.</p>
    <p>So whenever you hit the same value of bits as you started with, run the full start and new outputs forward in the same generator and see if they match up to the full cycle length.</p>
    <p><b>@TODO: direct people to <code>exercise1/low_order_cycle_lengths.py</code>.</b></p>
    <hr>

    <h3>Continue to <a href="http://localhost:3002">Exercise 2</a></h3>
  </div>
</body>
</html>
