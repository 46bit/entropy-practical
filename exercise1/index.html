<!DOCTYPE html>
<html>
<head>
  <title>Exercise 1</title>
  <link rel="stylesheet" href="css/layout.css">
  <script src="js/jquery-3.0.0.min.js"></script>
  <script src="js/layout.js"></script>
  <script src="js/numbers-frame.js"></script>
</head>
<body>
  <div class="container">
    <h2>Exercise 1</h2>
    <h1>Linear Congruential Generator patterns</h1>
    <p><b>To learn more about Pseudo-random Number Generation, we're going to take a look at a relatively simple algorithm for it.</b></p>
    <hr>

    <h2>Which of these look random to you?</h2>
    <p>The relationship between each number in the sequence and how large they are.</p>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=65473-m=65536-c=0-intensity.png);">A</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">There's a lot of structure in this.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=259-m=65534-c=0-intensity.png);">B</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Definite patterns: this looks like a repeating barcode.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=9562-m=65522-c=0-intensity.png);">C</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Pretty structure, but structure nonetheless.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=1001-m=2187-c=8-intensity.png);">D</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Looks like a little tiled image.</p>
      </li>
    </ul>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=361-m=450-c=1-intensity.png);">E</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">The bands are some sort of structure.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=71-m=125-c=1-intensity.png);">F</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Definite structure.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=85-m=65536-c=1-intensity.png);">G</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This does look quite random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=29305-m=58564-c=1-intensity.png);">H</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This does look quite random.</p>
      </li>
    </ul>
    <hr>

    <h2>How about now?</h2>
    <p>The 5 least significant bits of each generator's output.</p>
    <ul class="numbers-frame-collection">
      <li class="numbers-frame" data-numbers-path="numbers/a=65473-m=65536-c=0-binary.txt">
        <span class="label">A</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The 5 lowest bits are always identical. The variation is entirely in the high bits.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=259-m=65534-c=0-binary.txt">
        <span class="label">B</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least bit is always 1.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=9562-m=65522-c=0-binary.txt">
        <span class="label">C</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least bit is always 0.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=1001-m=2187-c=8-binary.txt">
        <span class="label">D</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The pattern here isn't obvious displayed like this.</p>
      </li>
    </ul>
    <ul class="numbers-frame-collection">
      <li class="numbers-frame" data-numbers-path="numbers/a=361-m=450-c=1-binary.txt">
        <span class="label">E</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least bit alternates between 0 and 1.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=71-m=125-c=1-binary.txt">
        <span class="label">F</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The pattern here isn't obvious displayed like this.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=85-m=65536-c=1-binary.txt">
        <span class="label">G</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least, 2nd least and 3rd least bits each repeat very quickly.</p>
      </li>
      <li class="numbers-frame" data-numbers-path="numbers/a=29305-m=58564-c=1-binary.txt">
        <span class="label">H</span>
        <pre></pre>
        <label class="reveal-tick">
         <input type="checkbox">
         I see a pattern
        </label>
        <p class="reveal">The least and 2nd least bits each repeat very quickly.</p>
      </li>
    </ul>
    <hr>

    <h2>And now?</h2>
    <p>The relationship between a number and the successive number.</p>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=65473-m=65536-c=0-pairs.png);">A</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">It's not immediately obvious that it repeats, but this doesn't look random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=259-m=65534-c=0-pairs.png);">B</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This really doesn't look random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=9562-m=65522-c=0-pairs.png);">C</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This is more scattered than A, B or C but still doesn't look random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=1001-m=2187-c=8-pairs.png);">D</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This really doesn't look random.</p>
      </li>
    </ul>
    <ul class="chart-collection">
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=361-m=450-c=1-pairs.png);">E</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">Those straight lines don't look stereotypically random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=71-m=125-c=1-pairs.png);">F</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">There's nothing here. Not random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=85-m=65536-c=1-pairs.png);">G</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This is very uniform but it isn't random.</p>
      </li>
      <li>
        <div class="chart-image-zoom" style="background-image: url(numbers/a=29305-m=58564-c=1-pairs.png);">H</div>
        <label class="reveal-tick">
          <input type="checkbox">
          I see a pattern
        </label>
        <p class="reveal">This is quite complex but there are evident patterns.</p>
      </li>
    </ul>
    <hr>

    <h2>Linear Congruential Generators</h2>
    <p>The algorithm behind all these sequences is called the Linear Congruential Generator. It works by a simple recurrence relationship:</p>
    <p>
<pre style="font-size: 30px;">X<sub>n+1</sub> = aX<sub>n</sub> + c (mod m)</pre>
    </p>
    <p>So starting with a provided <b>seed <code>X<sub>0</sub></code></b> this generates a sequence,</p>
    <p>
<pre style="font-size: 24px;">X<sub>0</sub>, X<sub>1</sub>, X<sub>2</sub>, X<sub>3</sub>, &hellip;</pre>
    </p>
    <p>where</p>
    <p>
<pre style="font-size: 24px;">X<sub>1</sub> = aX<sub>0</sub> + c (mod m)
X<sub>2</sub> = aX<sub>1</sub> + c (mod m)
X<sub>3</sub> = aX<sub>2</sub> + c (mod m)
&vellip;</pre>
    </p>
    <p>Each generator <code>A, &hellip;, H</code> has its own parameters <code>a</code>, <code>m</code> and <code>c</code>. You'll be provided with these to answer the questions that follow.</p>
    <hr>

    <h2>Why do some of these sequences look more random than others?</h2>

    <h3>Task 1: Cycle lengths</h3>

    <p>Let's consider generator A. This has parameters <code>a = 65473, m = 65536, c = 0</code>.</p>

<pre style="font-size: 24px;">X<sub>n+1</sub> = 65473X<sub>n</sub> + 0 (mod 65536)</pre>

    <p>We set <code>X<sub>0</sub> = 1</code>. Now let's calculate things.</p>

<pre>X<sub>1</sub> = 65473&times;1     + 0 (mod 65536) =      65473 (mod 65536) = 65473 = 0b1111111111000001
X<sub>2</sub> = 65473&times;65473 + 0 (mod 65536) = 4286713729 (mod 65536) =  3969 = 0b0000111110000001
X<sub>3</sub> = 65473&times;3969  + 0 (mod 65536) =  259862337 (mod 65536) = 12097 = 0b0010111101000001
X<sub>4</sub> = 65473&times;12097 + 0 (mod 65536) =  792026881 (mod 65536) = 24321 = 0b0101111100000001</pre>

    <p>Eventually, some <code>X<sub>n</sub></code> will be equal to <code>65473 = X<sub>1</sub>.</code>. When that happens the sequence will have done one cycle, and then <code>X<sub>n+1</sub> = X<sub>2</sub></code> and so forth. The length the cycle is a big determinant of how good the generators look in the first set of charts.</p>

    <p>Therefore your first task is to calculate cycle lengths.</p>
    <p><b>@TODO: direct people to <code>exercise1/cycle_lengths.py</code>.</b></p>

    <p>Cross-reference your cycle lengths with the top diagrams. Do you see how the ones with small visible patterns tend to have short cycle lengths?</p>

    <h3>Task 2: Low bit cycle lengths</h3>
    <p>Consider the binary outputs from generator A, B, C, E, G or H. Their low bits all have patterns, where they show values in a predictable fashion. D and F lack such an obvious pattern - but that may well be because it's too long for us to spot immediately.</p>
    <p>To explore this more we want to calculate the cycle lengths for the lowest X bits of the outputs.</p>

  </div>
</body>
</html>
